import{e as Xt,t as ct,u as xt}from"./index-DAydmHNs.js";import"./modulepreload-polyfill-B5Qt9EMX.js";const pt={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let s="̀".codePointAt(0);s<="ͯ".codePointAt(0);++s){const t=String.fromCodePoint(s);for(const e of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const r=(e+t).normalize().codePointAt(0);r>126&&(pt[r]=e)}}const ft={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const s of Object.keys(ft)){const t=s.toUpperCase();for(let e=ft[s][0];e<=ft[s][1];++e)pt[e]=e%2===0?t:s}function et(s){if(s<192||s>8580)return s;const t=pt[s];return t!==void 0?t.codePointAt(0):s}function j(s,t){return s>t?s:t}const Ft=s=>s.split("").map(t=>t.codePointAt(0)),Jt=new Set(` \f
\r	\v  \u2028\u2029  　\uFEFF`.split("").map(s=>s.codePointAt(0)));for(let s=" ".codePointAt(0);s<=" ".codePointAt(0);s++)Jt.add(s);const Z="".codePointAt(0),Q="A".codePointAt(0),q="Z".codePointAt(0),Ct="a".codePointAt(0),Tt="z".codePointAt(0),Qt="0".codePointAt(0),qt="9".codePointAt(0);function V(s,t,e){return e?s:t-s-1}const tt=16,ut=-3,nt=-1,G=tt/2,te=tt/2,ee=G+nt,zt=4,Rt=2;function dt(s){return s?new Set:null}function X(s,t,e){if(t!==null&&t.i16.length>s+e){const i=t.i16.subarray(s,s+e);return[s+e,i]}return[s,new Int16Array(e)]}function St(s,t,e){if(t!==null&&t.i32.length>s+e){const i=t.i32.subarray(s,s+e);return[s+e,i]}return[s,new Int32Array(e)]}function Lt(s){return s>=Ct&&s<=Tt?1:s>=Q&&s<=q?2:s>=Qt&&s<=qt?4:0}function Pt(s){const t=String.fromCodePoint(s);return t!==t.toUpperCase()?1:t!==t.toLowerCase()?2:t.match(new RegExp("\\p{Number}","gu"))!==null?4:t.match(new RegExp("\\p{Letter}","gu"))!==null?3:0}function ot(s){return s<=Z?Lt(s):Pt(s)}function mt(s,t){return s===0&&t!==0?G:s===1&&t===2||s!==4&&t===4?ee:t===0?te:0}function ie(s,t){return t===0?G:mt(ot(s[t-1]),ot(s[t]))}function se(s,t,e,i){let r=s.slice(i),o=r.indexOf(e);if(o===0)return i;if(!t&&e>=Ct&&e<=Tt){o>0&&(r=r.slice(0,o));const n=r.indexOf(e-32);n>=0&&(o=n)}return o<0?-1:i+o}function vt(s){for(const t of s)if(t>=128)return!1;return!0}function yt(s,t,e){if(!vt(s))return 0;if(!vt(t))return-1;let i=0,r=0;for(let o=0;o<t.length;o++){if(r=se(s,e,t[o],r),r<0)return-1;o===0&&r>0&&(i=r-1),r++}return i}const re=(s,t,e,i,r,o,n)=>{const h=r.length;if(h===0)return[{start:0,end:0,score:0},dt(o)];const a=i.length;if(n!==null&&a*h>n.i16.length)return Ut(s,t,e,i,r,o);const m=yt(i,r,s);if(m<0)return[{start:-1,end:-1,score:0},null];let y=0,g=0,p=null,f=null,w=null,d=null;[y,p]=X(y,n,a),[y,f]=X(y,n,a),[y,w]=X(y,n,a),[g,d]=St(g,n,h);const[,b]=St(g,n,a);for(let _=0;_<b.length;_++)b[_]=i[_];let u=0,A=0,l=0,c=0;const S=r[0];let O=r[0],E=0,v=0,x=!1,T=b.subarray(m),W=p.subarray(m).subarray(0,T.length),it=f.subarray(m).subarray(0,T.length),Bt=w.subarray(m).subarray(0,T.length);for(let[_,F]of T.entries()){let C=null;F<=Z?(C=Lt(F),!s&&C===2&&(F+=32)):(C=Pt(F),!s&&C===2&&(F=String.fromCodePoint(F).toLowerCase().codePointAt(0)),t&&(F=et(F))),T[_]=F;const z=mt(v,C);if(Bt[_]=z,v=C,F===O&&(l<h&&(d[l]=m+_,l++,O=r[Math.min(l,h-1)]),c=m+_),F===S){const R=tt+z*Rt;if(W[_]=R,it[_]=1,h===1&&(e&&R>u||!e&&R>=u)&&(u=R,A=m+_,e&&z===G))break;x=!1}else x?W[_]=j(E+nt,0):W[_]=j(E+ut,0),it[_]=0,x=!0;E=W[_]}if(l!==h)return[{start:-1,end:-1,score:0},null];if(h===1){const _={start:A,end:A+1,score:u};if(!o)return[_,null];const F=new Set;return F.add(A),[_,F]}const P=d[0],N=c-P+1;let M=null;[y,M]=X(y,n,N*h);{const _=p.subarray(P,c+1);for(const[F,C]of _.entries())M[F]=C}let[,B]=X(y,n,N*h);{const _=f.subarray(P,c+1);for(const[F,C]of _.entries())B[F]=C}const bt=d.subarray(1),$t=r.slice(1).slice(0,bt.length);for(const[_,F]of bt.entries()){let C=!1;const z=$t[_],R=_+1,D=R*N,L=b.subarray(F,c+1),wt=w.subarray(F).subarray(0,L.length),Ht=B.subarray(D+F-P).subarray(0,L.length),Vt=B.subarray(D+F-P-1-N).subarray(0,L.length),Zt=M.subarray(D+F-P).subarray(0,L.length),Kt=M.subarray(D+F-P-1-N).subarray(0,L.length),at=M.subarray(D+F-P-1).subarray(0,L.length);at[0]=0;for(const[U,Yt]of L.entries()){const At=U+F;let $=0,K=0,H=0;if(C?K=at[U]+nt:K=at[U]+ut,z===Yt){$=Kt[U]+tt;let Y=wt[U];H=Vt[U]+1,Y===G?H=1:H>1&&(Y=j(Y,j(zt,w[At-H+1]))),$+Y<K?($+=wt[U],H=0):$+=Y}Ht[U]=H,C=$<K;const st=j(j($,K),0);R===h-1&&(e&&st>u||!e&&st>=u)&&(u=st,A=At),Zt[U]=st}}const ht=dt(o);let k=P;if(o&&ht!==null){let _=h-1;k=A;let F=!0;for(;;){const C=_*N,z=k-P,R=M[C+z];let D=0,L=0;if(_>0&&k>=d[_]&&(D=M[C-N+z-1]),k>d[_]&&(L=M[C+z-1]),R>D&&(R>L||R===L&&F)){if(ht.add(k),_===0)break;_--}F=B[C+z]>1||C+N+z+1<B.length&&B[C+N+z+1]>0,k--}}return[{start:k,end:A+1,score:u},ht]};function Nt(s,t,e,i,r,o,n){let h=0,a=0,m=!1,y=0,g=0;const p=dt(n);let f=0;r>0&&(f=ot(e[r-1]));for(let w=r;w<o;w++){let d=e[w];const b=ot(d);if(s||(d>=Q&&d<=q?d+=32:d>Z&&(d=String.fromCodePoint(d).toLowerCase().codePointAt(0))),t&&(d=et(d)),d===i[h]){n&&p!==null&&p.add(w),a+=tt;let u=mt(f,b);y===0?g=u:(u===G&&(g=u),u=j(j(u,g),zt)),h===0?a+=u*Rt:a+=u,m=!1,y++,h++}else m?a+=nt:a+=ut,m=!0,y=0,g=0;f=b}return[a,p]}const Ut=(s,t,e,i,r,o,n)=>{if(r.length===0)return[{start:0,end:0,score:0},null];if(yt(i,r,s)<0)return[{start:-1,end:-1,score:0},null];let h=0,a=-1,m=-1;const y=i.length,g=r.length;for(let p=0;p<y;p++){let f=i[V(p,y,e)];s||(f>=Q&&f<=q?f+=32:f>Z&&(f=String.fromCodePoint(f).toLowerCase().codePointAt(0))),t&&(f=et(f));const w=r[V(h,g,e)];if(f===w&&(a<0&&(a=p),h++,h===g)){m=p+1;break}}if(a>=0&&m>=0){h--;for(let w=m-1;w>=a;w--){const d=V(w,y,e);let b=i[d];s||(b>=Q&&b<=q?b+=32:b>Z&&(b=String.fromCodePoint(b).toLowerCase().codePointAt(0)));const u=V(h,g,e),A=r[u];if(b===A&&(h--,h<0)){a=w;break}}if(!e){const w=a;a=y-m,m=y-w}const[p,f]=Nt(s,t,i,r,a,m,o);return[{start:a,end:m,score:p},f]}return[{start:-1,end:-1,score:0},null]},ne=(s,t,e,i,r,o,n)=>{if(r.length===0)return[{start:0,end:0,score:0},null];const h=i.length,a=r.length;if(h<a)return[{start:-1,end:-1,score:0},null];if(yt(i,r,s)<0)return[{start:-1,end:-1,score:0},null];let m=0,y=-1,g=0,p=-1;for(let f=0;f<h;f++){const w=V(f,h,e);let d=i[w];s||(d>=Q&&d<=q?d+=32:d>Z&&(d=String.fromCodePoint(d).toLowerCase().codePointAt(0))),t&&(d=et(d));const b=V(m,a,e);if(r[b]===d){if(b===0&&(g=ie(i,w)),m++,m===a){if(g>p&&(y=f,p=g),g===G)break;f-=m-1,m=0,g=0}}else f-=m,m=0,g=0}if(y>=0){let f=0,w=0;e?(f=y-a+1,w=y+1):(f=h-(y+1),w=h-(y-a+1));const[d]=Nt(s,t,i,r,f,w,!1);return[{start:f,end:w,score:d},null]}return[{start:-1,end:-1,score:0},null]},oe=100*1024,le=2048;function he(s,t){return{i16:new Int16Array(s),i32:new Int32Array(t)}}const ae=he(oe,le),ce=(s,t,e)=>{let i=!1;switch(t){case"smart-case":s.toLowerCase()!==s&&(i=!0);break;case"case-sensitive":i=!0;break;case"case-insensitive":s=s.toLowerCase(),i=!1;break}let r=Ft(s);return e&&(r=r.map(et)),{queryRunes:r,caseSensitive:i}};function fe(s,t){const e=Object.keys(s).map(r=>parseInt(r,10)).sort((r,o)=>o-r);let i=[];for(const r of e)if(i=i.concat(s[r]),i.length>=t)break;return i}function ue(s,t,e){return i=>{const r=this.runesList[i];if(t.length>r.length)return;let[o,n]=this.algoFn(e,this.opts.normalize,this.opts.forward,r,t,!0,ae);if(o.start===-1)return;if(this.opts.fuzzy===!1){n=new Set;for(let a=o.start;a<o.end;++a)n.add(a)}const h=this.opts.sort?o.score:0;s[h]===void 0&&(s[h]=[]),s[h].push({item:this.items[i],...o,positions:n??new Set})}}function de(s){const{queryRunes:t,caseSensitive:e}=ce(s,this.opts.casing,this.opts.normalize),i={},r=ue.bind(this)(i,t,e);for(let o=0,n=this.runesList.length;o<n;++o)r(o);return fe(i,this.opts.limit)}const Wt={limit:1/0,selector:s=>s,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class ge{constructor(t,...e){switch(this.opts={...Wt,...e[0]},this.items=t,this.runesList=t.map(i=>Ft(this.opts.selector(i).normalize())),this.algoFn=ne,this.opts.fuzzy){case"v2":this.algoFn=re;break;case"v1":this.algoFn=Ut;break}}}const pe={...Wt,match:de};class me extends ge{constructor(t,...e){super(t,...e),this.opts={...pe,...e[0]}}find(t){if(t.length===0||this.items.length===0)return this.items.slice(0,this.opts.limit).map(ye);t=t.normalize();let e=this.opts.match.bind(this)(t);return be(e,this.opts)}}const ye=s=>({item:s,start:-1,end:-1,score:0,positions:new Set});function be(s,t){if(t.sort){const{selector:e}=t;s.sort((i,r)=>{if(i.score===r.score)for(const o of t.tiebreakers){const n=o(i,r,e);if(n!==0)return n}return 0})}return Number.isFinite(t.limit)&&s.splice(t.limit),s}function we(s,t,e){return e(s.item).length-e(t.item).length}function Ae(s,t){return s.start-t.start}class Mt{constructor(t,...e){this.finder=new me(t,...e),this.find=this.finder.find.bind(this.finder)}}var Se=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Dt=new Set,gt=typeof process=="object"&&process?process:{},It=(s,t,e,i)=>{typeof gt.emitWarning=="function"?gt.emitWarning(s,t,e,i):console.error(`[${e}] ${t}: ${s}`)},lt=globalThis.AbortController,_t=globalThis.AbortSignal;if(typeof lt>"u"){_t=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,i){this._onabort.push(i)}},lt=class{constructor(){t()}signal=new _t;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(let i of this.signal._onabort)i(e);this.signal.onabort?.(e)}}};let s=gt.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{s&&(s=!1,It("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var ve=s=>!Dt.has(s),I=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s),jt=s=>I(s)?s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?rt:null:null,rt=class extends Array{constructor(s){super(s),this.fill(0)}},_e=class J{heap;length;static#l=!1;static create(t){let e=jt(t);if(!e)return[];J.#l=!0;let i=new J(t,e);return J.#l=!1,i}constructor(t,e){if(!J.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Oe=class kt{#l;#f;#m;#T;#y;#P;#N;#b;get perf(){return this.#b}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#r;#w;#s;#i;#t;#a;#u;#h;#n;#A;#o;#S;#v;#d;#g;#_;#C;#c;#U;static unsafeExposeInternals(t){return{starts:t.#v,ttls:t.#d,autopurgeTimers:t.#g,sizes:t.#S,keyMap:t.#s,keyList:t.#i,valList:t.#t,next:t.#a,prev:t.#u,get head(){return t.#h},get tail(){return t.#n},free:t.#A,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,i,r,o)=>t.#D(e,i,r,o),moveToTail:e=>t.#L(e),indexes:e=>t.#O(e),rindexes:e=>t.#E(e),isStale:e=>t.#p(e)}}get max(){return this.#l}get maxSize(){return this.#f}get calculatedSize(){return this.#w}get size(){return this.#r}get fetchMethod(){return this.#P}get memoMethod(){return this.#N}get dispose(){return this.#m}get onInsert(){return this.#T}get disposeAfter(){return this.#y}constructor(t){let{max:e=0,ttl:i,ttlResolution:r=1,ttlAutopurge:o,updateAgeOnGet:n,updateAgeOnHas:h,allowStale:a,dispose:m,onInsert:y,disposeAfter:g,noDisposeOnSet:p,noUpdateTTL:f,maxSize:w=0,maxEntrySize:d=0,sizeCalculation:b,fetchMethod:u,memoMethod:A,noDeleteOnFetchRejection:l,noDeleteOnStaleGet:c,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:O,ignoreFetchAbort:E,perf:v}=t;if(v!==void 0&&typeof v?.now!="function")throw new TypeError("perf option must have a now() method if specified");if(this.#b=v??Se,e!==0&&!I(e))throw new TypeError("max option must be a nonnegative integer");let x=e?jt(e):Array;if(!x)throw new Error("invalid max value: "+e);if(this.#l=e,this.#f=w,this.maxEntrySize=d||this.#f,this.sizeCalculation=b,this.sizeCalculation){if(!this.#f&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#N=A,u!==void 0&&typeof u!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#P=u,this.#C=!!u,this.#s=new Map,this.#i=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#a=new x(e),this.#u=new x(e),this.#h=0,this.#n=0,this.#A=_e.create(e),this.#r=0,this.#w=0,typeof m=="function"&&(this.#m=m),typeof y=="function"&&(this.#T=y),typeof g=="function"?(this.#y=g,this.#o=[]):(this.#y=void 0,this.#o=void 0),this.#_=!!this.#m,this.#U=!!this.#T,this.#c=!!this.#y,this.noDisposeOnSet=!!p,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!l,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!O,this.ignoreFetchAbort=!!E,this.maxEntrySize!==0){if(this.#f!==0&&!I(this.#f))throw new TypeError("maxSize must be a positive integer if specified");if(!I(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#H()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!c,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!h,this.ttlResolution=I(r)||r===0?r:1,this.ttlAutopurge=!!o,this.ttl=i||0,this.ttl){if(!I(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#I()}if(this.#l===0&&this.ttl===0&&this.#f===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#f){let T="LRU_CACHE_UNBOUNDED";ve(T)&&(Dt.add(T),It("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,kt))}}getRemainingTTL(t){return this.#s.has(t)?1/0:0}#I(){let t=new rt(this.#l),e=new rt(this.#l);this.#d=t,this.#v=e;let i=this.ttlAutopurge?new Array(this.#l):void 0;this.#g=i,this.#j=(n,h,a=this.#b.now())=>{if(e[n]=h!==0?a:0,t[n]=h,i?.[n]&&(clearTimeout(i[n]),i[n]=void 0),h!==0&&i){let m=setTimeout(()=>{this.#p(n)&&this.#x(this.#i[n],"expire")},h+1);m.unref&&m.unref(),i[n]=m}},this.#z=n=>{e[n]=t[n]!==0?this.#b.now():0},this.#F=(n,h)=>{if(t[h]){let a=t[h],m=e[h];if(!a||!m)return;n.ttl=a,n.start=m,n.now=r||o();let y=n.now-m;n.remainingTTL=a-y}};let r=0,o=()=>{let n=this.#b.now();if(this.ttlResolution>0){r=n;let h=setTimeout(()=>r=0,this.ttlResolution);h.unref&&h.unref()}return n};this.getRemainingTTL=n=>{let h=this.#s.get(n);if(h===void 0)return 0;let a=t[h],m=e[h];if(!a||!m)return 1/0;let y=(r||o())-m;return a-y},this.#p=n=>{let h=e[n],a=t[n];return!!a&&!!h&&(r||o())-h>a}}#z=()=>{};#F=()=>{};#j=()=>{};#p=()=>!1;#H(){let t=new rt(this.#l);this.#w=0,this.#S=t,this.#R=e=>{this.#w-=t[e],t[e]=0},this.#k=(e,i,r,o)=>{if(this.#e(i))return 0;if(!I(r))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(r=o(i,e),!I(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#W=(e,i,r)=>{if(t[e]=i,this.#f){let o=this.#f-t[e];for(;this.#w>o;)this.#M(!0)}this.#w+=t[e],r&&(r.entrySize=i,r.totalCalculatedSize=this.#w)}}#R=t=>{};#W=(t,e,i)=>{};#k=(t,e,i,r)=>{if(i||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#n;!(!this.#G(e)||((t||!this.#p(e))&&(yield e),e===this.#h));)e=this.#u[e]}*#E({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#h;!(!this.#G(e)||((t||!this.#p(e))&&(yield e),e===this.#n));)e=this.#a[e]}#G(t){return t!==void 0&&this.#s.get(this.#i[t])===t}*entries(){for(let t of this.#O())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*rentries(){for(let t of this.#E())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*keys(){for(let t of this.#O()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(let t of this.#E()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(let t of this.#O())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(let t of this.#E())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let i of this.#O()){let r=this.#t[i],o=this.#e(r)?r.__staleWhileFetching:r;if(o!==void 0&&t(o,this.#i[i],this))return this.get(this.#i[i],e)}}forEach(t,e=this){for(let i of this.#O()){let r=this.#t[i],o=this.#e(r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,this.#i[i],this)}}rforEach(t,e=this){for(let i of this.#E()){let r=this.#t[i],o=this.#e(r)?r.__staleWhileFetching:r;o!==void 0&&t.call(e,o,this.#i[i],this)}}purgeStale(){let t=!1;for(let e of this.#E({allowStale:!0}))this.#p(e)&&(this.#x(this.#i[e],"expire"),t=!0);return t}info(t){let e=this.#s.get(t);if(e===void 0)return;let i=this.#t[e],r=this.#e(i)?i.__staleWhileFetching:i;if(r===void 0)return;let o={value:r};if(this.#d&&this.#v){let n=this.#d[e],h=this.#v[e];if(n&&h){let a=n-(this.#b.now()-h);o.ttl=a,o.start=Date.now()}}return this.#S&&(o.size=this.#S[e]),o}dump(){let t=[];for(let e of this.#O({allowStale:!0})){let i=this.#i[e],r=this.#t[e],o=this.#e(r)?r.__staleWhileFetching:r;if(o===void 0||i===void 0)continue;let n={value:o};if(this.#d&&this.#v){n.ttl=this.#d[e];let h=this.#b.now()-this.#v[e];n.start=Math.floor(Date.now()-h)}this.#S&&(n.size=this.#S[e]),t.unshift([i,n])}return t}load(t){this.clear();for(let[e,i]of t){if(i.start){let r=Date.now()-i.start;i.start=this.#b.now()-r}this.set(e,i.value,i)}}set(t,e,i={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:o,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:h=this.sizeCalculation,status:a}=i,{noUpdateTTL:m=this.noUpdateTTL}=i,y=this.#k(t,e,i.size||0,h);if(this.maxEntrySize&&y>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#x(t,"set"),this;let g=this.#r===0?void 0:this.#s.get(t);if(g===void 0)g=this.#r===0?this.#n:this.#A.length!==0?this.#A.pop():this.#r===this.#l?this.#M(!1):this.#r,this.#i[g]=t,this.#t[g]=e,this.#s.set(t,g),this.#a[this.#n]=g,this.#u[g]=this.#n,this.#n=g,this.#r++,this.#W(g,y,a),a&&(a.set="add"),m=!1,this.#U&&this.#T?.(e,t,"add");else{this.#L(g);let p=this.#t[g];if(e!==p){if(this.#C&&this.#e(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!n&&(this.#_&&this.#m?.(f,t,"set"),this.#c&&this.#o?.push([f,t,"set"]))}else n||(this.#_&&this.#m?.(p,t,"set"),this.#c&&this.#o?.push([p,t,"set"]));if(this.#R(g),this.#W(g,y,a),this.#t[g]=e,a){a.set="replace";let f=p&&this.#e(p)?p.__staleWhileFetching:p;f!==void 0&&(a.oldValue=f)}}else a&&(a.set="update");this.#U&&this.onInsert?.(e,t,e===p?"update":"replace")}if(r!==0&&!this.#d&&this.#I(),this.#d&&(m||this.#j(g,r,o),a&&this.#F(a,g)),!n&&this.#c&&this.#o){let p=this.#o,f;for(;f=p?.shift();)this.#y?.(...f)}return this}pop(){try{for(;this.#r;){let t=this.#t[this.#h];if(this.#M(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#c&&this.#o){let t=this.#o,e;for(;e=t?.shift();)this.#y?.(...e)}}}#M(t){let e=this.#h,i=this.#i[e],r=this.#t[e];return this.#C&&this.#e(r)?r.__abortController.abort(new Error("evicted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(r,i,"evict"),this.#c&&this.#o?.push([r,i,"evict"])),this.#R(e),this.#g?.[e]&&(clearTimeout(this.#g[e]),this.#g[e]=void 0),t&&(this.#i[e]=void 0,this.#t[e]=void 0,this.#A.push(e)),this.#r===1?(this.#h=this.#n=0,this.#A.length=0):this.#h=this.#a[e],this.#s.delete(i),this.#r--,e}has(t,e={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:r}=e,o=this.#s.get(t);if(o!==void 0){let n=this.#t[o];if(this.#e(n)&&n.__staleWhileFetching===void 0)return!1;if(this.#p(o))r&&(r.has="stale",this.#F(r,o));else return i&&this.#z(o),r&&(r.has="hit",this.#F(r,o)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:i=this.allowStale}=e,r=this.#s.get(t);if(r===void 0||!i&&this.#p(r))return;let o=this.#t[r];return this.#e(o)?o.__staleWhileFetching:o}#D(t,e,i,r){let o=e===void 0?void 0:this.#t[e];if(this.#e(o))return o;let n=new lt,{signal:h}=i;h?.addEventListener("abort",()=>n.abort(h.reason),{signal:n.signal});let a={signal:n.signal,options:i,context:r},m=(d,b=!1)=>{let{aborted:u}=n.signal,A=i.ignoreFetchAbort&&d!==void 0,l=i.ignoreFetchAbort||!!(i.allowStaleOnFetchAbort&&d!==void 0);if(i.status&&(u&&!b?(i.status.fetchAborted=!0,i.status.fetchError=n.signal.reason,A&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),u&&!A&&!b)return g(n.signal.reason,l);let c=f,S=this.#t[e];return(S===f||A&&b&&S===void 0)&&(d===void 0?c.__staleWhileFetching!==void 0?this.#t[e]=c.__staleWhileFetching:this.#x(t,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(t,d,a.options))),d},y=d=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=d),g(d,!1)),g=(d,b)=>{let{aborted:u}=n.signal,A=u&&i.allowStaleOnFetchAbort,l=A||i.allowStaleOnFetchRejection,c=l||i.noDeleteOnFetchRejection,S=f;if(this.#t[e]===f&&(!c||!b&&S.__staleWhileFetching===void 0?this.#x(t,"fetch"):A||(this.#t[e]=S.__staleWhileFetching)),l)return i.status&&S.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),S.__staleWhileFetching;if(S.__returned===S)throw d},p=(d,b)=>{let u=this.#P?.(t,o,a);u&&u instanceof Promise&&u.then(A=>d(A===void 0?void 0:A),b),n.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(d(void 0),i.allowStaleOnFetchAbort&&(d=A=>m(A,!0)))})};i.status&&(i.status.fetchDispatched=!0);let f=new Promise(p).then(m,y),w=Object.assign(f,{__abortController:n,__staleWhileFetching:o,__returned:void 0});return e===void 0?(this.set(t,w,{...a.options,status:void 0}),e=this.#s.get(t)):this.#t[e]=w,w}#e(t){if(!this.#C)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof lt}async fetch(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:a=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:y=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:d,forceRefresh:b=!1,status:u,signal:A}=e;if(!this.#C)return u&&(u.fetch="get"),this.get(t,{allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:o,status:u});let l={allowStale:i,updateAgeOnGet:r,noDeleteOnStaleGet:o,ttl:n,noDisposeOnSet:h,size:a,sizeCalculation:m,noUpdateTTL:y,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:w,ignoreFetchAbort:f,status:u,signal:A},c=this.#s.get(t);if(c===void 0){u&&(u.fetch="miss");let S=this.#D(t,c,l,d);return S.__returned=S}else{let S=this.#t[c];if(this.#e(S)){let x=i&&S.__staleWhileFetching!==void 0;return u&&(u.fetch="inflight",x&&(u.returnedStale=!0)),x?S.__staleWhileFetching:S.__returned=S}let O=this.#p(c);if(!b&&!O)return u&&(u.fetch="hit"),this.#L(c),r&&this.#z(c),u&&this.#F(u,c),S;let E=this.#D(t,c,l,d),v=E.__staleWhileFetching!==void 0&&i;return u&&(u.fetch=O?"stale":"refresh",v&&O&&(u.returnedStale=!0)),v?E.__staleWhileFetching:E.__returned=E}}async forceFetch(t,e={}){let i=await this.fetch(t,e);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(t,e={}){let i=this.#N;if(!i)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:o,...n}=e,h=this.get(t,n);if(!o&&h!==void 0)return h;let a=i(t,h,{options:n,context:r});return this.set(t,a,n),a}get(t,e={}){let{allowStale:i=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:n}=e,h=this.#s.get(t);if(h!==void 0){let a=this.#t[h],m=this.#e(a);return n&&this.#F(n,h),this.#p(h)?(n&&(n.get="stale"),m?(n&&i&&a.__staleWhileFetching!==void 0&&(n.returnedStale=!0),i?a.__staleWhileFetching:void 0):(o||this.#x(t,"expire"),n&&i&&(n.returnedStale=!0),i?a:void 0)):(n&&(n.get="hit"),m?a.__staleWhileFetching:(this.#L(h),r&&this.#z(h),a))}else n&&(n.get="miss")}#B(t,e){this.#u[e]=t,this.#a[t]=e}#L(t){t!==this.#n&&(t===this.#h?this.#h=this.#a[t]:this.#B(this.#u[t],this.#a[t]),this.#B(this.#n,t),this.#n=t)}delete(t){return this.#x(t,"delete")}#x(t,e){let i=!1;if(this.#r!==0){let r=this.#s.get(t);if(r!==void 0)if(this.#g?.[r]&&(clearTimeout(this.#g?.[r]),this.#g[r]=void 0),i=!0,this.#r===1)this.#$(e);else{this.#R(r);let o=this.#t[r];if(this.#e(o)?o.__abortController.abort(new Error("deleted")):(this.#_||this.#c)&&(this.#_&&this.#m?.(o,t,e),this.#c&&this.#o?.push([o,t,e])),this.#s.delete(t),this.#i[r]=void 0,this.#t[r]=void 0,r===this.#n)this.#n=this.#u[r];else if(r===this.#h)this.#h=this.#a[r];else{let n=this.#u[r];this.#a[n]=this.#a[r];let h=this.#a[r];this.#u[h]=this.#u[r]}this.#r--,this.#A.push(r)}}if(this.#c&&this.#o?.length){let r=this.#o,o;for(;o=r?.shift();)this.#y?.(...o)}return i}clear(){return this.#$("delete")}#$(t){for(let e of this.#E({allowStale:!0})){let i=this.#t[e];if(this.#e(i))i.__abortController.abort(new Error("deleted"));else{let r=this.#i[e];this.#_&&this.#m?.(i,r,t),this.#c&&this.#o?.push([i,r,t])}}if(this.#s.clear(),this.#t.fill(void 0),this.#i.fill(void 0),this.#d&&this.#v){this.#d.fill(0),this.#v.fill(0);for(let e of this.#g??[])e!==void 0&&clearTimeout(e);this.#g?.fill(void 0)}if(this.#S&&this.#S.fill(0),this.#h=0,this.#n=0,this.#A.length=0,this.#w=0,this.#r=0,this.#c&&this.#o){let e=this.#o,i;for(;i=e?.shift();)this.#y?.(...i)}}},Ee="@unocss/autocomplete";function xe(s,t,e=!0){let i=t,r=t;const o=/[^\s>"'`;]/;for(;i&&o.test(s.charAt(i-1));)--i;for(;r<s.length&&o.test(s.charAt(r));)++r;if(e)return{content:s.slice(i,r),start:i,end:r};let n=i-1;const h="class",a="className",m="@apply";for(;n>5&&!/[="'{}><@;]/.test(s[n--]););if(s[n+1]==="@"&&s.slice(n+1,n+6+1)===m)return{content:s.slice(i,r),start:i,end:r};if(s[n]==="="){if(n>9&&s.slice(n-9,n)===a)return{content:s.slice(i,r),start:i,end:r};if(n>5&&s.slice(n-5,n)===h)return{content:s.slice(i,r),start:i,end:r}}}function Fe(s,t){const e=s.substring(0,t);if(/<\w[^>]*$/.test(e))return e.match(/\S+(?=\s*=(?:\s*["'])?[^"']*$)/)?.[0]}function Ce(s){return s.reduce((t,e)=>{const i=[];return t.forEach(r=>{e.forEach(o=>{i.push(r.concat([o]))})}),i},[[]])}var Ot=class extends Error{constructor(s,t){super(s),this.template=t,this.name=Ee,this.template=t}toString(){return`⚠️ [${this.name}]: ${this.message}. ${this.template?`Template: ${this.template}.`:""}`}};const Te={directions:"(x|y|t|b|l|r|s|e)",num:`(${[0,1,2,3,4,5,6,8,10,12,24,36].join("|")})`,percent:`(${[0,10,20,30,40,50,60,70,80,90,100].join("|")})`,percentage:`(${["10%","20%","30%","40%","50%","60%","70%","80%","90%","100%"].join("|")})`},ze=["DEFAULT"];function Et(s,t,e,i){let r=0;Array.from(s.matchAll(t)).forEach(o=>{const n=o.index;r!==n&&i(s.slice(r,n),r,n),e(o),r=n+o[0].length}),r!==s.length&&i(s.slice(r),r,s.length)}function Re(s,t={},e={}){const i=[],r=[],o={...Te,...e};s=s.replace(/<(\w+)>/g,(y,g,p,f)=>o[g]?o[g]:(r.push(new Ot(`Unknown template shorthand: <${g}>`,f)),y)),a(s),r.length&&(i.length=0);const n=new Mt(Le(i));return{parts:i,suggest:m,errors:r};function h(y){Et(y,/\$([\w.|]+)/g,g=>{i.push({type:"theme",objects:g[1].split("|").map(p=>p.split(".").reduce((f,w)=>!w||!f[w]?(r.push(new Ot(`Invalid theme key: ${w}`,g.input)),{}):f[w],t))})},g=>{i.push({type:"static",value:g})})}function a(y){Et(y,/\((.*?)\)/g,g=>{i.push({type:"group",values:g[1].split("|")})},g=>{h(g)})}function m(y,g="prefix"){if(y.length>1&&g==="fuzzy")return n.find(y).map(b=>b.item);let p=y.replace(/-/g,""),f=[""],w=[""];const d=[...i];for(;d.length;){const b=d.shift();if(b.type==="static"){const u=b.value.replace(/-/g,"");if(!p.startsWith(u)&&!b.value.startsWith(p))return[""];f=f.map(A=>A+b.value),p=p.slice(u.length)}else if(b.type==="group"){const u=b.values.find(A=>A&&p.startsWith(A));if(u){if(f=f.map(A=>A+u),p=p.slice(u.length),!d[0]&&p)return[];continue}else{if(d[0]){const A=b.values.filter(l=>l&&l.startsWith(p));if(p="",A.length){f=f.map(l=>A.map(c=>l+c)).flat();continue}break}if(f[0]==="")break;w=b.values.filter(A=>A.startsWith(p));break}}else if(b.type==="theme"){const u=b.objects.flatMap(l=>Object.keys(l)).filter(l=>l&&!ze.includes(l)&&l[0]!=="_"),A=u.find(l=>l&&p.startsWith(l));if(A!=null){p=p.slice(A.length);const l=b.objects.map(c=>c[A]).filter(c=>!!c&&typeof c=="object");l.length?(f=f.map(c=>`${c+A}-`),d.unshift({type:"theme",objects:l})):w=u.filter(c=>c.startsWith(p))}else{if(d[0]&&d[0].type!=="static"){const l=d[0].values;l&&(f=f.filter(c=>c&&p.startsWith(c)).map(c=>l.map(S=>c+S)).flat())}else w=u.filter(l=>l.startsWith(p));break}}}return w.map(b=>f.map(u=>u+b)).flat().filter(b=>b.length>=y.length)}}function Gt(s){return s.type==="static"?[s.value]:s.type==="theme"?s.objects.flatMap(t=>{const e=Object.keys(t).filter(i=>i&&i[0]!=="_");for(const i in t){const r=t[i];if(r!=null&&typeof r=="object"&&!Array.isArray(r)){const o=Gt({type:"theme",objects:[r]}).map(n=>`${i}-${n}`);e.push(...o)}}return e}):s.type==="group"?[...s.values]:[]}function Le(s){return xt(Ce(s.map(t=>Gt(t))).flatMap(t=>t.join("").replace("-DEFAULT","")))}function Ue(s,t={}){const e=new Map,i=new Oe({max:5e3}),r=new Map;let o=[];const n=[],{matchType:h="prefix",throwErrors:a=!0}=t;return u(),{suggest:y,suggestInFile:g,templates:n,cache:i,errorCache:r,reset:u,enumerate:m};async function m(){const l=new Set,c=Array.from("abcdefghijklmnopqrstuvwxyz"),S=[...c,"-"],O=c.flatMap(E=>[E,...S.map(v=>`${E}${v}`)]);return await Promise.all(O.map(E=>y(E).then(v=>v.forEach(x=>l.add(x))))),await Promise.all([...l].filter(E=>/^\w+$/.test(E)&&E.length>3).map(E=>y(`${E}-`).then(v=>v.forEach(x=>l.add(x))))),l}async function y(l,c=!1){if(!c&&l.length<1)return[];if(i.has(l))return i.get(l);const S=s.config.presets.find(x=>x.name==="@unocss/preset-attributify")?.options?.prefix,O=S?l.startsWith(S)?l.slice(S.length):l.replace(`:${S}`,":"):l,E=await s.matchVariants(O);let v=(await Promise.all(E.map(async([,x])=>{let T=x?l.search(Xt(x)):l.length;T===-1&&(T=0);const W=l.slice(0,T),it=l.slice(T+l.length);return A(await Promise.all([f(x),w(x),d(x),b(x)]),W,it)}))).flat();return h==="fuzzy"&&(v=new Mt(v,{tiebreakers:[Ae,we]}).find(l).map(x=>x.item)),i.set(l,v),v}async function g(l,c){const S=Fe(l,c)!==void 0,O=await p(l,c);if(O){const v=await y(O.extracted,S),x=O.transformSuggestions?O.transformSuggestions(v):v;return{suggestions:v.map((T,W)=>[T,x[W]]),resolveReplacement:O.resolveReplacement}}const E=xe(l,c,(s.config.presets||[]).some(v=>v.name==="@unocss/preset-attributify"));if(E)return{suggestions:(await y(E.content,S)).map(v=>[v,v]),resolveReplacement:v=>({start:E.start,end:E.end,replacement:v})}}async function p(l,c){if(!s.config.autocomplete.extractors.length)return null;for(const S of s.config.autocomplete.extractors){const O=await S.extract({content:l,cursor:c});if(O)return O}return null}async function f(l){return await s.parseToken(l,"-")?[l]:[]}async function w(l){return h==="fuzzy"?o:o.filter(c=>c.startsWith(l))}async function d(l){return Array.from(s.cache.entries()).filter(c=>c[1]&&c[0].startsWith(l)).map(c=>c[0])}async function b(l){return(await Promise.allSettled([Array.from(e.values()).flatMap(({suggest:c})=>c(l,h)??[]),...n.filter(c=>typeof c=="function").map(c=>c(l))])).flatMap(c=>c.status==="fulfilled"?c.value:[])}function u(){e.clear(),i.clear(),r.clear(),o=[...Object.keys(s.config.rulesStaticMap),...s.config.shortcuts.filter(l=>typeof l[0]=="string").map(l=>l[0])],n.length=0,n.push(...s.config.autocomplete.templates||[],...s.config.rulesDynamic.flatMap(l=>ct(l?.[2]?.autocomplete||[])),...s.config.shortcuts.flatMap(l=>ct(l?.[2]?.autocomplete||[])),...s.config.variants.flatMap(l=>ct(l.autocomplete||[])));for(const l of n)if(typeof l!="function"){if(e.has(l)||r.has(l))continue;const c=Re(l,s.config.theme,s.config.autocomplete.shorthands);c.errors.length&&r.set(l,c.errors),e.set(l,c)}if(r.size&&a){const l=Array.from(r.values()).flat().map(c=>c.toString()).join(`
`);throw new Error(l)}}function A(l,c="",S=""){return xt(l.flat()).filter(O=>!!(O&&!O.endsWith("-")&&!s.isBlocked(O))).sort((O,E)=>{if(/\d/.test(O)&&/\D/.test(E))return 1;if(/\D/.test(O)&&/\d/.test(E))return-1;const v=+(O.match(/\d+$/)?.[0]||NaN),x=+(E.match(/\d+$/)?.[0]||NaN);return!Number.isNaN(v)&&!Number.isNaN(x)?v-x:O.localeCompare(E)}).map(O=>c+O+S)}}export{Ot as AutocompleteParseError,Ce as cartesian,Ue as createAutocomplete,ze as ignoredThemeKeys,Re as parseAutocomplete,Fe as searchAttrKey,xe as searchUsageBoundary,Te as shorthands};
